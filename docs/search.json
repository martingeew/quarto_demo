[
  {
    "objectID": "home_ownership_generation.html",
    "href": "home_ownership_generation.html",
    "title": "New Zealand Housing Demographics",
    "section": "",
    "text": "For a demonstration of a interactiive plotly line plot, see Figure 1.\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\n\n# Load the demographic share dataset\ndf_ownership = pd.read_csv(\"home_ownership_generation.csv\", sep=\",\")\n\n\n# Function to plot home ownership rates by age and generation using Plotly\ndef plot_ownership_by_age_and_generation_plotly(df):\n    # Define the custom color palette\n    colors = {\n        \"Gen X\": \"#636EFA\",  # blue\n        \"Baby Boomer\": \"#B6E880\",  # light green\n        \"Gen Z\": \"#FFA15A\",  # orange\n        \"Millennial\": \"#EF553B\",  # red\n        \"Silent\": \"#FF97FF\",  # pink\n    }\n\n    # Create the plot\n    fig = px.line(\n        df,\n        x=\"Age group\",\n        y=\"Home Ownership Rate\",\n        color=\"Generation\",\n        title=\"\",\n        labels={\n            \"Age group\": \"Age Group\",\n            \"Home Ownership Rate\": \"Home Ownership Rate (%)\",\n        },\n        line_shape=\"linear\",\n        color_discrete_map=colors,  # Apply the custom color palette\n    )\n\n    fig.update_layout(\n        xaxis_title=\"Age Group\",\n        yaxis_title=\"\",\n        legend_title_text=\"\",\n        template=\"plotly_dark\",\n        xaxis=dict(tickangle=45),\n        plot_bgcolor=\"#282a36\",\n        paper_bgcolor=\"#282a36\",\n        font=dict(size=14, family=\"Consolas\"),  # Set the font to Consolas\n        title_font=dict(size=18, family=\"Consolas\"),\n        width=500,  # Adjust based on your needs\n        height=450,  # Adjust based on your needs\n    )\n\n    fig.update_yaxes(title_text=\"\", range=[40, 90])\n\n    fig.show()\n\n\n# Plot the data using Plotly\n\ndf_ownership_grouped = (\n    df_ownership[\n        (df_ownership[\"Generation\"] != \"Other\")\n        & (df_ownership[\"Generation\"] != \"Total\")\n        & (~df_ownership[\"Age group\"].isin([\"0-4\", \"5-9\", \"10-14\"]))\n    ]\n    .groupby([\"Age group\", \"Generation\"])[\"Home Ownership Rate\"]\n    .mean()\n    .reset_index()\n)\n\nplot_ownership_by_age_and_generation_plotly(df_ownership_grouped)\n\n\n\n\n                                                \n\n\nFigure 1: Home Ownership Rate (mean) by GenerationSource: Statistics NZ\n\n\n\n\nFor a demonstration of a interactiive plotly line plot, see Figure 2.\n\n\nCode\nimport pandas as pd\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\n\n# Load the dataset\ndf = pd.read_csv(\"pop_estimate_processed_nz.csv\", sep=\",\")\ndf_2030 = pd.read_csv(\"pop_estimate_processed_2030.csv\", sep=\",\")\n\n\n# Concatenate df_2030 to df\ndf_combined = pd.concat([df, df_2030], ignore_index=True)\n\n# Apply the relabeling function to the 'Age' column\ndf_combined[\"Age\"] = df_combined[\"Age\"].apply(\n    lambda age: \"90+\" if age == \"90 Years and over\" else age\n)\n\n# Define the years of interest for plotting (excluding 2018)\nyears = [1996, 2006, 2023, 2030]\n\n# Create a subplot figure with 2 rows and 2 columns\nfig = make_subplots(\n    rows=2, cols=2, shared_yaxes=True, subplot_titles=[f\"{year}\" for year in years]\n)\n\nrow_col_pairs = [(1, 1), (1, 2), (2, 1), (2, 2)]\n\nfor (row, col), year in zip(row_col_pairs, years):\n    # Filter data for the specific year\n    year_data = df_combined[df_combined[\"Year\"] == year]\n\n    # Determine bar colors based on 'Generation'\n    colors = [\n        \"orange\" if gen == \"Baby Boomer\" else \"skyblue\"\n        for gen in year_data[\"Generation\"]\n    ]\n\n    # Create bar traces for each age group\n    fig.add_trace(\n        go.Bar(\n            x=year_data[\"Age\"],\n            y=year_data[\"Population\"],\n            marker_color=colors,\n            showlegend=False,\n        ),\n        row=row,\n        col=col,\n    )\n\n# Add annotation pointing to the 'Baby Boomer' bar for 1996\nfig.add_annotation(\n    x=\"65-69 Years\",\n    y=250000,  # Adjust the y-coordinate to move the annotation down\n    xref=\"x1\",\n    yref=\"y1\",\n    text=\"Baby Boomers\",\n    showarrow=False,\n    font=dict(\n        color=\"orange\", size=16, family=\"Consolas\"\n    ),  # Increase the font size and set font family\n)\n\n# Update layout for dark mode\nfig.update_layout(\n    template=\"plotly_dark\",\n    width=1000,\n    height=1000,\n    title_text=\"\",\n    plot_bgcolor=\"#282a36\",\n    paper_bgcolor=\"#282a36\",\n    font=dict(size=14, family=\"Consolas\"),  # Set the font family for the entire plot\n)\n\n# Update axis labels and rotate x-axis tick labels\nfig.update_xaxes(title_text=\"\", tickangle=45, tickfont=dict(family=\"Consolas\"))\nfig.update_yaxes(title_text=\"\", showticklabels=True, tickfont=dict(family=\"Consolas\"))\nfig.update_yaxes(title_text=\"\", range=[0, 400000])\n\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 2: Population Distribution by Age GroupSource: Statistics NZ"
  }
]