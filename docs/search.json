[
  {
    "objectID": "home_ownership_generation.html",
    "href": "home_ownership_generation.html",
    "title": "New Zealand Housing Demographics",
    "section": "",
    "text": "Average home ownership has been dropping in each successive generationat every given age group, see Figure 1.\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\n\n# Load the demographic share dataset\ndf_ownership = pd.read_csv(\"home_ownership_generation.csv\", sep=\",\")\n\n\n# Function to plot home ownership rates by age and generation using Plotly\ndef plot_ownership_by_age_and_generation_plotly(df):\n    # Define the custom color palette\n    colors = {\n        \"Gen X\": \"#636EFA\",  # blue\n        \"Baby Boomer\": \"#B6E880\",  # light green\n        \"Gen Z\": \"#FFA15A\",  # orange\n        \"Millennial\": \"#EF553B\",  # red\n        \"Silent\": \"#FF97FF\",  # pink\n    }\n\n    # Create the plot\n    fig = px.line(\n        df,\n        x=\"Age group\",\n        y=\"Home Ownership Rate\",\n        color=\"Generation\",\n        title=\"\",\n        labels={\n            \"Age group\": \"Age Group\",\n            \"Home Ownership Rate\": \"Home Ownership Rate (%)\",\n        },\n        line_shape=\"linear\",\n        color_discrete_map=colors,  # Apply the custom color palette\n    )\n\n    fig.update_layout(\n        xaxis_title=\"Age Group\",\n        yaxis_title=\"\",\n        legend_title_text=\"\",\n        template=\"plotly_dark\",\n        xaxis=dict(tickangle=45),\n        plot_bgcolor=\"#282a36\",\n        paper_bgcolor=\"#282a36\",\n        font=dict(size=14, family=\"Consolas\"),  # Set the font to Consolas\n        title_font=dict(size=18, family=\"Consolas\"),\n        width=500,  # Adjust based on your needs\n        height=450,  # Adjust based on your needs\n        margin=dict(l=20, r=20, t=40, b=20),\n    )\n\n    fig.update_yaxes(title_text=\"\", range=[40, 90])\n\n    fig.show()\n\n\n# Plot the data using Plotly\n\ndf_ownership_grouped = (\n    df_ownership[\n        (df_ownership[\"Generation\"] != \"Other\")\n        & (df_ownership[\"Generation\"] != \"Total\")\n        & (~df_ownership[\"Age group\"].isin([\"0-4\", \"5-9\", \"10-14\"]))\n    ]\n    .groupby([\"Age group\", \"Generation\"])[\"Home Ownership Rate\"]\n    .mean()\n    .reset_index()\n)\n\nplot_ownership_by_age_and_generation_plotly(df_ownership_grouped)\n\n\n\n\n                                                \n\n\nFigure 1: Home Ownership Rate (mean) by GenerationSource: Statistics NZ\n\n\n\n\nAverage home ownership since 1986 has declined the most for thoseaged 25-34, see Figure 2.\n\n\nCode\nimport pandas as pd\nimport plotly.graph_objects as go\n\n# Load the demographic share dataset\ndf_filtered = pd.read_csv(\"home_ownership_generation.csv\", sep=\",\")\n\n# Filter the data for the age ranges 25 to 74\nage_ranges = [\n    \"25-29\",\n    \"30-34\",\n    \"35-39\",\n    \"40-44\",\n    \"45-49\",\n    \"50-54\",\n    \"55-59\",\n    \"60-64\",\n    \"65-69\",\n    \"70-74\",\n]\ndf_filtered = df_filtered[df_filtered[\"Age group\"].isin(age_ranges)]\n\n\n# Define a function to map age ranges to the new intervals\ndef map_age(age):\n    if age in [\"25-29\", \"30-34\"]:\n        return \"25-34\"\n    elif age in [\"35-39\", \"40-44\"]:\n        return \"35-44\"\n    elif age in [\"45-49\", \"50-54\"]:\n        return \"45-54\"\n    elif age in [\"55-59\", \"60-64\"]:\n        return \"55-64\"\n    elif age in [\"65-69\", \"70-74\"]:\n        return \"65-74\"\n    else:\n        return None\n\n\n# Apply the function to create a new age column\ndf_filtered.loc[:, \"Age_Group\"] = df_filtered[\"Age group\"].apply(map_age)\n\n# Group the data by the new age column and calculate the mean Home Ownership Rate for each group\ndf_grouped = (\n    df_filtered.groupby([\"Year\", \"Age_Group\"])[\"Home Ownership Rate\"]\n    .mean()\n    .reset_index()\n)\n\n# Create a line plot using Plotly\nfig = go.Figure()\n\n# Define colors for each age group\ncolors = {\n    \"25-34\": \"#636EFA\",  #  blue\n    \"35-44\": \"#B6E880\",  # light green\n    \"45-54\": \"#FFA15A\",  # orange\n    \"55-64\": \"#EF553B\",  # red\n    \"65-74\": \"#FF97FF\",  # pink\n}\n\n# Add traces for each age group\nfor age_group in df_grouped[\"Age_Group\"].unique():\n    age_group_data = df_grouped[df_grouped[\"Age_Group\"] == age_group]\n    fig.add_trace(\n        go.Scatter(\n            x=age_group_data[\"Year\"],\n            y=age_group_data[\"Home Ownership Rate\"],\n            mode=\"lines+markers\",\n            name=age_group,\n            line=dict(color=colors[age_group]),\n            showlegend=False,\n        )\n    )\n    # Add annotation for the last data point of each age group\n    fig.add_annotation(\n        x=age_group_data[\"Year\"].values[-1] + 1,\n        y=age_group_data[\"Home Ownership Rate\"].values[-1],\n        text=age_group,\n        font=dict(color=colors[age_group], family=\"Consolas\"),\n        showarrow=False,\n        xanchor=\"left\",\n        yanchor=\"middle\",\n    )\n\n# Update layout for dark mode\nfig.update_layout(\n    title=\"Home Ownership Rate (mean) by Age Group\",\n    template=\"plotly_dark\",\n    plot_bgcolor=\"#282a36\",\n    paper_bgcolor=\"#282a36\",\n    title_font=dict(size=18, family=\"Consolas\"),\n    xaxis_title=\"Year\",\n    yaxis_title=\"Home Ownership Rate\",\n    font=dict(size=14, family=\"Consolas\"),\n    width=500,  # Adjust based on your needs\n    height=450,  # Adjust based on your needs\n    margin=dict(l=20, r=50, t=40, b=20),\n)\n\nfig.update_yaxes(title_text=\"\", range=[40, 90])\nfig.update_xaxes(title_text=\"\", range=[1985, 2020])\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 2: Home Ownership Rate (mean) by age groupSource: Statistics NZ\n\n\n\n\nBaby boomers have been driving home ownership growth buttheir influence will begin to wane in the coming decade, see Figure 3.\n\n\nCode\nimport pandas as pd\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\n\n# Load the dataset\ndf = pd.read_csv(\"pop_estimate_processed_nz.csv\", sep=\",\")\ndf_2030 = pd.read_csv(\"pop_estimate_processed_2030.csv\", sep=\",\")\n\n\n# Concatenate df_2030 to df\ndf_combined = pd.concat([df, df_2030], ignore_index=True)\n\n# Apply the relabeling function to the 'Age' column\ndf_combined[\"Age\"] = df_combined[\"Age\"].apply(\n    lambda age: \"90+\" if age == \"90 Years and over\" else age\n)\n\n# Define the years of interest for plotting (excluding 2018)\nyears = [1996, 2006, 2023, 2030]\n\n# Create a subplot figure with 2 rows and 2 columns\nfig = make_subplots(\n    rows=2, cols=2, shared_yaxes=True, subplot_titles=[f\"{year}\" for year in years]\n)\n\nrow_col_pairs = [(1, 1), (1, 2), (2, 1), (2, 2)]\n\nfor (row, col), year in zip(row_col_pairs, years):\n    # Filter data for the specific year\n    year_data = df_combined[df_combined[\"Year\"] == year]\n\n    # Determine bar colors based on 'Generation'\n    colors = [\n        \"orange\" if gen == \"Baby Boomer\" else \"skyblue\"\n        for gen in year_data[\"Generation\"]\n    ]\n\n    # Create bar traces for each age group\n    fig.add_trace(\n        go.Bar(\n            x=year_data[\"Age\"],\n            y=year_data[\"Population\"],\n            marker_color=colors,\n            showlegend=False,\n        ),\n        row=row,\n        col=col,\n    )\n\n# Add annotation pointing to the 'Baby Boomer' bar for 1996\nfig.add_annotation(\n    x=\"65-69 Years\",\n    y=270000,  # Adjust the y-coordinate to move the annotation down\n    xref=\"x1\",\n    yref=\"y1\",\n    text=\"Baby Boomers\",\n    showarrow=False,\n    font=dict(\n        color=\"orange\", size=16, family=\"Consolas\"\n    ),  # Increase the font size and set font family\n)\n\n# Update layout for dark mode\nfig.update_layout(\n    template=\"plotly_dark\",\n    width=700,  \n    height=700,  \n    margin=dict(l=20, r=20, t=40, b=20),\n    title_text=\"\",\n    plot_bgcolor=\"#282a36\",\n    paper_bgcolor=\"#282a36\",\n    font=dict(size=14, family=\"Consolas\"),  # Set the font family for the entire plot\n)\n\n# Update axis labels and rotate x-axis tick labels\nfig.update_xaxes(title_text=\"\", tickangle=45, tickfont=dict(family=\"Consolas\"))\nfig.update_yaxes(title_text=\"\", showticklabels=True, tickfont=dict(family=\"Consolas\"))\nfig.update_yaxes(title_text=\"\", range=[0, 400000])\n\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 3: Population Distribution by Age GroupSource: Statistics NZ"
  }
]